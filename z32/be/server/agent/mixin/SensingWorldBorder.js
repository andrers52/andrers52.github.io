"use strict";import Assert from"../../../libs/arslib/util/assert.js";import Vector from"../../../common/geometry/Vector.js";import{environment}from"../../singleton/BEServer.js";export default function SensingWorldBorder(e){Assert.assert(this.onSensingWorldBorder,"Error: added SensingWorldBorder to agent without implementing onSensingWorldBorder event handler");let t=e||50,n=this,o=new Vector(0,t),r=new Vector(0,-t),i=new Vector(-t,0),s=new Vector(t,0);(()=>{let e=this.move;this.move=function(t,d){let l=function(){let e=new Vector,t=n.getPosition().clone().add(o),d=n.getPosition().clone().subtract(r),l=n.getPosition().clone().subtract(i),c=n.getPosition().clone().add(s);return environment.getWorldRectangle().checkPointInside(t)||e.add(o),environment.getWorldRectangle().checkPointInside(d)||e.add(r),environment.getWorldRectangle().checkPointInside(l)||e.add(i),environment.getWorldRectangle().checkPointInside(c)||e.add(s),e.equal(new Vector)?null:e}();return l&&this.onSensingWorldBorder(l),e.call(this,t,d)}})()};