import Assert from"../assert.js";export default class Persistence{static configure(e,...s){Assert.assert(!Persistence.entities,"Persistence#configure can only be called once"),Persistence.namespace=e,Persistence.entitiesToValues={},s.forEach(e=>{Persistence.entitiesToValues[e]=Persistence.retrieve(e),Object.defineProperty(Persistence,e,{get:()=>Persistence.entitiesToValues[e],set:s=>{Persistence.entitiesToValues[e]=Object.assign({},s),setTimeout(()=>{Persistence.save(e,s)},.1)}})})}static retrieve(e){return JSON.parse(window.localStorage.getItem(`${Persistence.namespace}:${e}`))}static save(e,s){window.localStorage.setItem(`${Persistence.namespace}:${e}`,JSON.stringify(s))}};